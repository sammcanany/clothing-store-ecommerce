# ===========================================
# CLOTHING STORE E-COMMERCE - ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env and customize the values
# Run: cp .env.example .env

# ===========================================
# PORTS
# ===========================================
# Change these if you have port conflicts
# NOTE: These control external port mapping only
# DATABASE_URL and REDIS_URL always use internal container ports (5432, 6379)
POSTGRES_PORT=5432
REDIS_PORT=6379
BACKEND_PORT=9000
FRONTEND_PORT=3000

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
POSTGRES_USER=medusa_user
POSTGRES_PASSWORD=medusa_password
POSTGRES_DB=medusa_db
# NOTE: Always uses internal port 5432 for container communication
DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Redis connection (Docker internal) - uses internal port 6379
REDIS_URL=redis://redis:6379

# If you change REDIS_PORT above, update this URL to match:
# REDIS_URL=redis://redis:[REDIS_PORT]

# ===========================================
# BACKEND - PAYMENT PROVIDERS
# ===========================================
# Stripe Secret API Key (get from https://dashboard.stripe.com/apikeys)
STRIPE_API_KEY=sk_test_51...

# ===========================================
# BACKEND - EMAIL NOTIFICATIONS
# ===========================================
# SendGrid API Key (get from https://app.sendgrid.com/settings/api_keys)
SENDGRID_API_KEY=SG....

# From email address (must be verified in SendGrid)
SENDGRID_FROM_EMAIL=noreply@yourstore.com

# ===========================================
# BACKEND - SECURITY SECRETS
# ===========================================
# PRODUCTION: Generate random 32+ character strings
# Linux/Mac: openssl rand -base64 32
# Windows: -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})
JWT_SECRET=something_very_secret_change_in_production
COOKIE_SECRET=something_very_secret_change_in_production

# ===========================================
# BACKEND - ENVIRONMENT
# ===========================================
# development or production
NODE_ENV=development

# ===========================================
# BACKEND - CORS CONFIGURATION
# ===========================================
# Development defaults - uses FRONTEND_PORT and BACKEND_PORT
STORE_CORS=http://localhost:${FRONTEND_PORT:-3000},http://localhost:8000
ADMIN_CORS=http://localhost:7001,http://localhost:7000,http://localhost:${BACKEND_PORT:-9000}
AUTH_CORS=http://localhost:${FRONTEND_PORT:-3000},http://localhost:8000,http://localhost:7001,http://localhost:7000,http://localhost:${BACKEND_PORT:-9000}

# Production example (uncomment and customize):
# STORE_CORS=https://yourstore.com
# ADMIN_CORS=https://admin.yourstore.com
# AUTH_CORS=https://yourstore.com,https://admin.yourstore.com

# ===========================================
# BACKEND - ADMIN USER
# ===========================================
# Change these for production!
ADMIN_EMAIL=admin@test.com
ADMIN_PASSWORD=supersecret

# ===========================================
# FRONTEND - CONFIGURATION
# ===========================================
# Development defaults - uses BACKEND_PORT and FRONTEND_PORT
NEXT_PUBLIC_MEDUSA_BACKEND_URL=http://localhost:${BACKEND_PORT:-9000}
NEXT_PUBLIC_BASE_URL=http://localhost:${FRONTEND_PORT:-3000}

# Production example (uncomment and customize):
# NEXT_PUBLIC_MEDUSA_BACKEND_URL=https://api.yourstore.com
# NEXT_PUBLIC_BASE_URL=https://yourstore.com

# ===========================================
# FRONTEND - API KEYS (Set after running setup)
# ===========================================
# Run: docker exec clothing-store-backend npm run full-setup
# Then copy the API key, Region ID, and Sales Channel ID shown in the output
NEXT_PUBLIC_MEDUSA_PUBLISHABLE_KEY=YOUR_API_KEY_HERE
NEXT_PUBLIC_MEDUSA_REGION_ID=YOUR_REGION_ID_HERE
NEXT_PUBLIC_MEDUSA_SALES_CHANNEL_ID=YOUR_SALES_CHANNEL_ID_HERE

# ===========================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ===========================================
# [ ] Change JWT_SECRET and COOKIE_SECRET to random values
# [ ] Change ADMIN_EMAIL and ADMIN_PASSWORD
# [ ] Change POSTGRES_PASSWORD
# [ ] Set NODE_ENV=production
# [ ] Update all CORS URLs to your actual domains
# [ ] Update NEXT_PUBLIC_MEDUSA_BACKEND_URL and NEXT_PUBLIC_BASE_URL
# [ ] Run full-setup and update API keys
# [ ] Set STRIPE_API_KEY (live key for production)
# [ ] Enable Stripe in regions via admin panel
# [ ] Set SENDGRID_API_KEY and SENDGRID_FROM_EMAIL
# [ ] Verify sender email in SendGrid dashboard
# [ ] Configure SSL/HTTPS with reverse proxy
# [ ] Set up database backups
# [ ] Configure cloud storage for uploads (S3, etc.)
# [ ] Add monitoring and error tracking
# [ ] Implement rate limiting
